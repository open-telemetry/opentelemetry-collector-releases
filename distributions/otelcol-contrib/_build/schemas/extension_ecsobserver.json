{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "properties": {
    "cluster_name": {
      "description": "ClusterName is the target ECS cluster name for service discovery.",
      "type": "string"
    },
    "cluster_region": {
      "description": "ClusterRegion is the target ECS cluster's AWS region.",
      "type": "string"
    },
    "docker_labels": {
      "description": "DockerLabels is a list of docker labels for filtering containers within tasks.",
      "items": {
        "properties": {
          "job_name": {
            "type": "string"
          },
          "job_name_label": {
            "type": "string"
          },
          "metrics_path": {
            "type": "string"
          },
          "metrics_path_label": {
            "type": "string"
          },
          "metrics_ports": {
            "items": {
              "type": "integer"
            },
            "type": "array"
          },
          "port_label": {
            "description": "PortLabel is mandatory, empty string means docker label based match is skipped.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "type": "array"
    },
    "job_label_name": {
      "description": "JobLabelName is the override for prometheus job label, using `job` literal will cause error in otel prometheus receiver. See https://github.com/open-telemetry/opentelemetry-collector/issues/575",
      "type": "string"
    },
    "refresh_interval": {
      "description": "RefreshInterval determines how frequency at which the observer needs to poll for collecting information about new processes.",
      "pattern": "^[0-9]+(ns|us|Âµs|ms|s|m|h)$",
      "type": "string"
    },
    "result_file": {
      "description": "ResultFile is the output path of the discovered targets YAML file (optional). This is mainly used in conjunction with the Prometheus receiver.",
      "type": "string"
    },
    "services": {
      "description": "Services is a list of service name patterns for filtering tasks.",
      "items": {
        "properties": {
          "container_name_pattern": {
            "description": "ContainerNamePattern is optional, empty string means all containers in that service would be exported. Otherwise both service and container name patterns need to match.",
            "type": "string"
          },
          "job_name": {
            "type": "string"
          },
          "metrics_path": {
            "type": "string"
          },
          "metrics_ports": {
            "items": {
              "type": "integer"
            },
            "type": "array"
          },
          "name_pattern": {
            "description": "NamePattern is mandatory.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "type": "array"
    },
    "task_definitions": {
      "description": "TaskDefinitions is a list of task definition arn patterns for filtering tasks.",
      "items": {
        "properties": {
          "arn_pattern": {
            "description": "ArnPattern is mandatory, empty string means arn based match is skipped.",
            "type": "string"
          },
          "container_name_pattern": {
            "description": "ContainerNamePattern is optional, empty string means all containers in that task definition would be exported. Otherwise both service and container name patterns need to match.",
            "type": "string"
          },
          "job_name": {
            "type": "string"
          },
          "metrics_path": {
            "type": "string"
          },
          "metrics_ports": {
            "items": {
              "type": "integer"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "type": "array"
    }
  },
  "type": "object"
}