{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "properties": {
    "compaction": {
      "properties": {
        "check_interval": {
          "description": "CheckInterval specifies frequency of compaction check",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "type": "string"
        },
        "cleanup_on_start": {
          "description": "CleanupOnStart specifies removal of temporary files is performed on start. It will remove all the files in the compaction directory starting with tempdb, temp files will be left if a previous run of the process is killed while compacting.",
          "type": "boolean"
        },
        "directory": {
          "description": "Directory specifies where the temporary files for compaction will be stored",
          "type": "string"
        },
        "max_transaction_size": {
          "description": "MaxTransactionSize specifies the maximum number of items that might be present in single compaction iteration",
          "type": "integer"
        },
        "on_rebound": {
          "description": "OnRebound specifies that compaction is attempted online, when rebound conditions are met. This typically happens when storage usage has increased, which caused increase in space allocation and afterwards it had most items removed. We want to run the compaction online only when there are not too many elements still being stored (which is an indication that \"heavy usage\" period is over) so compaction should be relatively fast and at the same time there is relatively large volume of space that might be reclaimed.",
          "type": "boolean"
        },
        "on_start": {
          "description": "OnStart specifies that compaction is attempted each time on start",
          "type": "boolean"
        },
        "rebound_needed_threshold_mib": {
          "description": "ReboundNeededThresholdMiB specifies the minimum total allocated size (both used and empty) to mark the need for online compaction",
          "type": "integer"
        },
        "rebound_trigger_threshold_mib": {
          "description": "ReboundTriggerThresholdMiB is used when compaction is marked as needed. When allocated data size drops below the specified value, the compactions starts and the flag marking need for compaction is cleared",
          "type": "integer"
        }
      },
      "type": "object"
    },
    "create_directory": {
      "description": "CreateDirectory specifies that the directory should be created automatically by the extension on start",
      "type": "boolean"
    },
    "directory": {
      "type": "string"
    },
    "directory_permissions": {
      "type": "string"
    },
    "fsync": {
      "description": "FSync specifies that fsync should be called after each database write",
      "type": "boolean"
    },
    "recreate": {
      "type": "boolean"
    },
    "timeout": {
      "description": "Duration string (e.g., '1s', '5m', '1h')",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "type": "string"
    }
  },
  "type": "object"
}